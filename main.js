(()=>{"use strict";class t{constructor(t){this.name=t,this.tasks=[]}setName(t){this.name=t}getName(){return this.name}setTasks(t){this.tasks=t}getTasks(){return this.tasks}getTask(t){return this.tasks.find((e=>e.getTitle()===t))}contains(t){return this.tasks.some((e=>e.getTitle()===t))}addTask(t){this.tasks.push(t)}deleteTask(t){this.tasks=this.tasks.filter((e=>e.getTitle()!==t))}}class e{constructor(t,e,s="",o=""){this.title=t,this.priority=e,this.dueDate=s,this.description=o}setTitle(t){this.title=t}getTitle(){return this.title}setPriority(t){this.priority=t}getPriority(){return this.priority}setDueDate(t){this.dueDate=t}getDueDate(){return this.dueDate}setDescription(t){this.description=t}getDescription(){return this.description}}class s{constructor(){this.projects=[],this.projects.push(new t("Hello World"))}setProjects(t){this.projects=t}getProjects(){return this.projects}getProject(t){return this.projects.find((e=>e.getName()===t))}contains(t){return this.projects.some((e=>e.getName()===t))}addProject(t){this.contains(t.name)||this.projects.push(t)}deleteProject(t){const e=this.projects.find((e=>e.getName()===t));this.projects.splice(this.projects.indexOf(e),1)}}class o{static saveTodoList(t){localStorage.setItem("todoList",JSON.stringify(t))}static getTodoList(){const o=Object.assign(new s,JSON.parse(localStorage.getItem("todoList")));return o.setProjects(o.getProjects().map((e=>Object.assign(new t,e)))),o.getProjects().forEach((t=>{t.setTasks(t.getTasks().map((t=>Object.assign(new e,t))))})),o}static addProject(t){const e=o.getTodoList();e.addProject(t),o.saveTodoList(e)}static deleteProject(t){const e=o.getTodoList();e.deleteProject(t),o.saveTodoList(e)}static addTask(t,e){const s=o.getTodoList();s.getProject(t).addTask(e),o.saveTodoList(s)}static deleteTask(t,e){const s=o.getTodoList();s.getProject(t).deleteTask(e),o.saveTodoList(s)}static renameTask(t,e,s){const a=o.getTodoList();a.getProject(t).getTask(e).setTitle(s),o.saveTodoList(a)}static setTaskDate(t,e,s){const a=o.getTodoList();a.getProject(t).getTask(e).setDueDate(s),o.saveTodoList(a)}}class a{static loadApp(){const t=document.querySelector("#projects-container");null===localStorage.getItem("todoList")&&[{title:"This is a low priority task!",priority:"low",description:"Low priority tasks only have a single exclamation mark next to their title."},{title:"This is a medium priority task!",priority:"medium",description:"Medium priority tasks have two exclamation marks instead of one."},{title:"This is a high priority task!",priority:"high",description:"If you want to feel overwhelming and crippling anxiety, you can use 'very important' to feel the pressure! "}].forEach((t=>o.addTask("Hello World",t))),a.loadProjects(),a.initAddProjectListener(),a.initAddTaskListener(),a.openProject("Hello World",t.firstChild)}static loadProjects(){o.getTodoList().getProjects().forEach((t=>a.createProject(t.name)))}static loadTasks(t){o.getTodoList().getProject(t).getTasks().forEach((t=>a.createTask(t.title,t.priority,t.dueDate,t.description)))}static loadProjectContent(t){document.querySelector(".current-project").textContent=t,a.clearTasks(),a.loadTasks(t)}static initAddProjectListener(){const t=document.querySelector(".add-project-container"),e=document.querySelector("#add-project"),s=document.querySelector("#add-project-input");e.addEventListener("click",(()=>s.classList.toggle("show"))),t.addEventListener("submit",(t=>{t.preventDefault();const e=s.value;null!==e&&""!==e&&(a.addProject(e),s.value="",s.classList.remove("show"))}))}static initAddTaskListener(){const t=document.querySelector("#open-modal"),e=document.querySelector("#modal-container"),s=document.querySelector("#close-modal"),o=document.querySelector("#submit-modal"),c=document.querySelector("#task-description");t.addEventListener("click",(()=>e.classList.add("show"))),s.addEventListener("click",(()=>e.classList.remove("show"))),o.addEventListener("click",(t=>{t.preventDefault(),a.getModalValues(),e.classList.remove("show"),a.addTask(),a.clearModalInputs(),c.style.height="35px"})),window.addEventListener("keydown",(t=>{e.classList.contains("show")&&"Escape"===t.key&&e.classList.remove("show")})),c.addEventListener("input",(function(){this.style.height>"70px"||(this.style.height=this.scrollHeight+"px")}))}static getModalValues(){return{title:document.querySelector("#task-title").value,priority:document.querySelector("#task-priority").value,dueDate:document.querySelector("#task-date").value,description:document.querySelector("#task-description").value}}static createProject(t){const e=document.querySelector(".projects-container"),s=document.createElement("div"),o=document.createElement("button"),c=document.createElement("p");s.classList.add("project"),c.classList.add("project-name"),c.textContent=t,c.addEventListener("click",(t=>{const e=t.target.textContent,s=t.target.parentElement;a.openProject(e,s)})),o.type="button",o.classList.add("remove-project"),o.textContent="-",o.addEventListener("click",(t=>{const e=t.target.previousElementSibling.textContent,s=t.target.parentElement;a.deleteProject(e,s)})),s.appendChild(c),s.appendChild(o),e.appendChild(s)}static deleteProject(t,e){e.classList.contains("selected")&&a.clearCurrentProject(),o.deleteProject(t),a.clearProjects(),a.loadProjects()}static clearAll(){a.clearCurrentProject(),a.clearProjects(),a.clearTasks()}static clearCurrentProject(){document.querySelector(".current-project").textContent=""}static clearProjects(){document.querySelector("#projects-container").innerHTML=""}static clearTasks(){document.querySelector(".task-list").innerHTML=""}static clearModalInputs(){[document.querySelector("#task-title"),document.querySelector("#task-priority"),document.querySelector("#task-date"),document.querySelector("#task-description")].forEach((t=>t.value=""))}static addProject(e){o.getTodoList().contains(e)?alert("You can't have two projects with the same name. Please consider changing it."):(o.addProject(new t(e)),a.createProject(e))}static openProject(t,e){document.querySelectorAll(".project").forEach((t=>t.classList.remove("selected"))),e.classList.add("selected"),a.loadProjectContent(t)}static createTask(t,e,s="",o=""){const c=document.querySelector(".task-list"),i=document.createElement("div"),r=document.createElement("button"),n=document.createElement("div"),d=document.createElement("h3"),l=document.createElement("p"),u=document.createElement("div"),p=document.createElement("input"),m=document.createElement("div"),h=document.createElement("input");switch(i.classList.add("task-item"),r.type="button",r.classList.add("remove-task"),r.textContent="-",n.classList.add("task-texts"),e){case"low":n.classList.add("low");break;case"medium":n.classList.add("medium");break;case"high":n.classList.add("high")}d.textContent=t,l.textContent=o,n.appendChild(d),n.appendChild(l),u.classList.add("due-date"),p.type="date",p.classList.add("time-input"),p.value=s,u.appendChild(p),m.classList.add("completion-check"),h.type="checkbox",h.classList.add("checkbox-input"),h.addEventListener("change",(()=>{!0===h.checked?i.classList.add("completed"):!1===h.checked&&i.classList.remove("completed")})),m.appendChild(h),r.addEventListener("click",(t=>{const e=t.target.nextElementSibling.children[0].textContent;a.deleteTask(e)})),i.appendChild(r),i.appendChild(n),i.appendChild(u),i.appendChild(m),c.appendChild(i)}static deleteTask(t){const e=document.querySelector(".current-project").textContent;o.deleteTask(e,t),a.clearTasks(),a.loadTasks(e)}static addTask(){const t=document.querySelector(".current-project").textContent,s=document.querySelector("#task-title"),{title:c,priority:i,dueDate:r,description:n}=a.getModalValues();if(""!==s.value){if(o.getTodoList().getProject(t).contains(c))return alert("This task already exists. Please consider changing it."),void(s.value="");o.addTask(t,new e(c,i,r,n)),a.createTask(c,i,r,n)}else alert("Please fill the task title.")}}a.loadApp()})();